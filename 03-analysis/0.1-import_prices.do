********************************************************************************
* 1. Clean Living Costs and Food Survey
* Author: Claire Paoli
* Date: Updated 2025.02.22
********************************************************************************

global path "/Volumes/Untitled/Projects/Carbon Pricing/2-analysis/01-data"
global raw "$path/01-raw"
global temp "$path/02-temp"
global clean "$path/03-clean"

* CPI time series, until 2021, 2015 = 100
* Source: https://www.ons.gov.uk/economy/inflationandpriceindices/datasets/consumerpriceindices/current
* Version: 16 Feb 2022

// ********************************************************************************
// * Monthly prices: 

import excel "$raw/2-prices/1_raw/mm23.xlsx", firstrow clear
rename Title date

#delimit ;
keep date CPIINDEX07TRANSPORT201510 CPIINDEX021ALCOHOLICBEVER CPIINDEX022TOBACCO201510 CPIINDEX01FOODANDNONALCO CPIINDEX03CLOTHINGANDFOOT CPIINDEX041ACTUALRENTSFO CPIINDEX04HOUSINGWATERAN
CPIINDEX043REGULARMAINTEN CPIINDEX044Watersupplyan CPIINDEX045ELECTRICITYGA
CPIINDEX05FURNHHEQUIP CPIINDEX051Furniturefurn CPIINDEX052HOUSEHOLDTEXTI CPIINDEX053Householdappli CPIINDEX054GLASSWARETABL CPIINDEX055TOOLSANDEQUIP CPIINDEX056Goodsandservi CPIINDEX06HEALTH2015100
CPIINDEX07TRANSPORT201510 CPIINDEX08COMMUNICATION201 CPIINDEX09RECREATIONCULT CPIINDEX10EDUCATION201510 CPIINDEX0451ELECTRICITY2 CPIINDEX0441WATERSUPPLY CPIINDEX1111RESTAURANTS CPIINDEX02ALCOHOLICBEVERAGES CPIINDEX0722FUELSLUBRI
CPIINDEX0452GAS2015100 CPIINDEX0453LIQUIDFUELS CPIINDEX0454SOLIDFUELS2 CPIINDEX0451ELECTRICITY2 CPIINDEX0441WATERSUPPLY CPIINDEX1111RESTAURANTS CPIINDEX12MISCELLANEOUSGOO CPIINDEX11HOTELSCAFESAND
CPIINDEX071PURCHASEOFVEH CPIINDEX072OPERATIONOFPE CPIINDEX073TRANSPORTSERVI CPIINDEX0731PASSENGERTRA CPIINDEX07326Passengert CPIINDEX0733PASSENGERTRA CPIINDEX0734PASSENGERTRA;
#delimit cr


rename CPIINDEX056Goodsandservi CPI_56
rename CPIINDEX055TOOLSANDEQUIP CPI_55
rename CPIINDEX054GLASSWARETABL CPI_54
rename CPIINDEX053Householdappli CPI_53
rename CPIINDEX052HOUSEHOLDTEXTI CPI_52
rename CPIINDEX051Furniturefurn CPI_51
rename CPIINDEX045ELECTRICITYGA CPI_45
rename CPIINDEX044Watersupplyan CPI_44
rename CPIINDEX043REGULARMAINTEN CPI_43
rename CPIINDEX041ACTUALRENTSFO CPI_41
rename CPIINDEX022TOBACCO201510 CPI_22
rename CPIINDEX021ALCOHOLICBEVER CPI_21
rename CPIINDEX06HEALTH2015100 CPI_6
rename CPIINDEX05FURNHHEQUIP CPI_5
rename CPIINDEX04HOUSINGWATERAN CPI_4
rename CPIINDEX03CLOTHINGANDFOOT CPI_3
rename CPIINDEX01FOODANDNONALCO CPI_1
rename CPIINDEX10EDUCATION201510 CPI_10
rename CPIINDEX09RECREATIONCULT CPI_9
rename CPIINDEX08COMMUNICATION201 CPI_8
rename CPIINDEX07TRANSPORT201510 CPI_7
rename CPIINDEX0451ELECTRICITY2 CPI_451
rename CPIINDEX0441WATERSUPPLY CPI_441
rename CPIINDEX1111RESTAURANTS CPI_1111
rename CPIINDEX02ALCOHOLICBEVERAGES CPI_2
rename CPIINDEX0722FUELSLUBRI CPI_722
rename CPIINDEX0454SOLIDFUELS2 CPI_454
rename CPIINDEX0453LIQUIDFUELS CPI_453
rename CPIINDEX0452GAS2015100 CPI_452 
rename CPIINDEX12MISCELLANEOUSGOO CPI_12
rename CPIINDEX11HOTELSCAFESAND CPI_11

rename CPIINDEX071PURCHASEOFVEH CPI_71
rename CPIINDEX072OPERATIONOFPE CPI_72
rename CPIINDEX073TRANSPORTSERVI CPI_73

rename CPIINDEX0731PASSENGERTRA  CPI_731
rename CPIINDEX07326Passengert CPI_732
g CPI_735 = CPI_732
rename CPIINDEX0733PASSENGERTRA CPI_733 
rename CPIINDEX0734PASSENGERTRA CPI_734

keep in 1010/1417

gen year = substr(date, 1, 4)
destring year, replace
gen month2 = substr(date, 6, 3)
label define order  1 JAN  2 FEB  3 MAR  4 APR  5 MAY  6 JUN 7 JUL 8 AUG 9 SEP 10 OCT 11 NOV 12 DEC
encode month, gen(month) label(order)


save "$raw/2-prices/2_clean/2025.02.22_prices_monthly.dta", replace


********************************************************************************
* Yearly prices

import excel "$raw/2-prices/1_raw/mm23.xlsx", firstrow clear

rename Title date
#delimit ;
keep date CPIINDEX07TRANSPORT201510 CPIINDEX021ALCOHOLICBEVER CPIINDEX022TOBACCO201510 CPIINDEX01FOODANDNONALCO CPIINDEX03CLOTHINGANDFOOT CPIINDEX041ACTUALRENTSFO CPIINDEX04HOUSINGWATERAN
CPIINDEX043REGULARMAINTEN CPIINDEX044Watersupplyan CPIINDEX045ELECTRICITYGA CPIINDEX03CLOTHINGANDFOOT
CPIINDEX05FURNHHEQUIP CPIINDEX051Furniturefurn CPIINDEX052HOUSEHOLDTEXTI CPIINDEX053Householdappli CPIINDEX054GLASSWARETABL CPIINDEX055TOOLSANDEQUIP CPIINDEX056Goodsandservi CPIINDEX06HEALTH2015100
CPIINDEX07TRANSPORT201510 CPIINDEX08COMMUNICATION201 CPIINDEX09RECREATIONCULT CPIINDEX10EDUCATION201510 CPIINDEX0451ELECTRICITY2 CPIINDEX0441WATERSUPPLY CPIINDEX1111RESTAURANTS CPIINDEX02ALCOHOLICBEVERAGES CPIINDEX0722FUELSLUBRI
CPIINDEX0452GAS2015100 CPIINDEX0453LIQUIDFUELS CPIINDEX0454SOLIDFUELS2 CPIINDEX0451ELECTRICITY2 CPIINDEX0441WATERSUPPLY CPIINDEX1111RESTAURANTS CPIINDEX12MISCELLANEOUSGOO CPIINDEX11HOTELSCAFESAND;
#delimit cr


rename CPIINDEX056Goodsandservi CPI_56
rename CPIINDEX055TOOLSANDEQUIP CPI_55
rename CPIINDEX054GLASSWARETABL CPI_54
rename CPIINDEX053Householdappli CPI_53
rename CPIINDEX052HOUSEHOLDTEXTI CPI_52
rename CPIINDEX051Furniturefurn CPI_51
rename CPIINDEX045ELECTRICITYGA CPI_45
rename CPIINDEX044Watersupplyan CPI_44
rename CPIINDEX043REGULARMAINTEN CPI_43
rename CPIINDEX041ACTUALRENTSFO CPI_41
rename CPIINDEX022TOBACCO201510 CPI_22
rename CPIINDEX021ALCOHOLICBEVER CPI_21
rename CPIINDEX06HEALTH2015100 CPI_6
rename CPIINDEX05FURNHHEQUIP CPI_5
rename CPIINDEX04HOUSINGWATERAN CPI_4
rename CPIINDEX03CLOTHINGANDFOOT CPI_3
rename CPIINDEX01FOODANDNONALCO CPI_1
rename CPIINDEX10EDUCATION201510 CPI_10
rename CPIINDEX09RECREATIONCULT CPI_9
rename CPIINDEX08COMMUNICATION201 CPI_8
rename CPIINDEX07TRANSPORT201510 CPI_7
rename CPIINDEX0451ELECTRICITY2 CPI_451
rename CPIINDEX0441WATERSUPPLY CPI_441
rename CPIINDEX1111RESTAURANTS CPI_1111
rename CPIINDEX02ALCOHOLICBEVERAGES CPI_2
rename CPIINDEX0722FUELSLUBRI CPI_722
rename CPIINDEX0454SOLIDFUELS2 CPI_454
rename CPIINDEX0453LIQUIDFUELS CPI_453
rename CPIINDEX0452GAS2015100 CPI_452 
rename CPIINDEX12MISCELLANEOUSGOO CPI_12
rename CPIINDEX11HOTELSCAFESAND CPI_11

keep in 7/228
destring date, replace force
keep if inrange(date, 1997, 2021)
destring *, replace
rename date year

save "$raw/2-prices/2_clean/2025.02.22_prices_yearly.dta", replace

// ********************************************************************************
// * Monthly prices: 

// clear
// use "$raw/2-prices/PriceData/consistentprices_inc_agg_groups.dta", clear

// keep if year >= 2001 & year <= 2019
// save "$clean/CPI_prices_monthly.dta", replace


 


























